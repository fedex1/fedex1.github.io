const inputtable = [{
        "param_using_own_eggs": true,
        "param_attempted_ivf_previously": false,
        "param_is_reason_for_infertility_known": true,
        "cdc_formula": "1-3",
        "formula_intercept": -6.8392144,
        "formula_age_linear_coefficient": 0.3347309,
        "formula_age_power_coefficient": -0.0003249,
        "formula_age_power_factor": 2.763313,
        "formula_bmi_linear_coefficient": 0.06997997,
        "formula_bmi_power_coefficient": -0.0015045,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": 0.09373152,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": 0.24104423,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": 0.02773216,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0.27949598,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": -0.5780511,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": -0.1354896,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": -0.1018557,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": 0.2252616,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": 0.03514055,
        "formula_prior_pregnancies_2+_value": -0.0059006,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.15787934,
        "formula_prior_live_births_2+_value": 0.03077479
    },
    {
        "param_using_own_eggs": true,
        "param_attempted_ivf_previously": false,
        "param_is_reason_for_infertility_known": false,
        "cdc_formula": "4-6",
        "formula_intercept": -7.5545223,
        "formula_age_linear_coefficient": 0.37931798,
        "formula_age_power_coefficient": -0.0003752,
        "formula_age_power_factor": 2.763313,
        "formula_bmi_linear_coefficient": 0.08057661,
        "formula_bmi_power_coefficient": -0.0015304,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": 0,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": 0,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": 0,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": 0,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": 0,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": 0,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": 0,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": 0.02240271,
        "formula_prior_pregnancies_2+_value": -0.054699,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.16421628,
        "formula_prior_live_births_2+_value": 0.05435658
    },
    {
        "param_using_own_eggs": true,
        "param_attempted_ivf_previously": true,
        "param_is_reason_for_infertility_known": true,
        "cdc_formula": "7-8",
        "formula_intercept": -8.102508,
        "formula_age_linear_coefficient": 0.37506646,
        "formula_age_power_coefficient": -0.0003171,
        "formula_age_power_factor": 2.784619,
        "formula_bmi_linear_coefficient": 0.04565965,
        "formula_bmi_power_coefficient": -0.0008793,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": 0.06858044,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": 0.23958731,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": -0.0128023,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0.27559287,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": -0.4806452,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": -0.1649105,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": -0.0770044,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": 0.18150326,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": 0.15884291,
        "formula_prior_pregnancies_2+_value": 0.16420575,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.32698183,
        "formula_prior_live_births_2+_value": 0.21325721
    },
    {
        "param_using_own_eggs": true,
        "param_attempted_ivf_previously": true,
        "param_is_reason_for_infertility_known": false,
        "cdc_formula": "9-10",
        "formula_intercept": -8.641603,
        "formula_age_linear_coefficient": 0.40532864,
        "formula_age_power_coefficient": -0.0003513,
        "formula_age_power_factor": 2.784619,
        "formula_bmi_linear_coefficient": 0.0534427,
        "formula_bmi_power_coefficient": -0.0009225,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": 0,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": 0,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": 0,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": 0,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": 0,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": 0,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": 0,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": 0.17347309,
        "formula_prior_pregnancies_2+_value": 0.17098727,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.36910534,
        "formula_prior_live_births_2+_value": 0.25715519
    },
    {
        "param_using_own_eggs": false,
        "param_attempted_ivf_previously": "N/A",
        "param_is_reason_for_infertility_known": true,
        "cdc_formula": "11-13",
        "formula_intercept": -0.4033333,
        "formula_age_linear_coefficient": 0.02185135,
        "formula_age_power_coefficient": -0.000087,
        "formula_age_power_factor": 2.377287,
        "formula_bmi_linear_coefficient": 0.03918024,
        "formula_bmi_power_coefficient": -0.0008828,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": -0.2662897,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": -0.0508467,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": -0.0203064,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0.09520576,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": -0.0550674,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": -0.1485842,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": -0.024112,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": -0.1974379,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": -0.0980307,
        "formula_prior_pregnancies_2+_value": -0.1001531,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.06581205,
        "formula_prior_live_births_2+_value": 0.05371457
    },
    {
        "param_using_own_eggs": false,
        "param_attempted_ivf_previously": "N/A",
        "param_is_reason_for_infertility_known": false,
        "cdc_formula": "14-16",
        "formula_intercept": -0.20316,
        "formula_age_linear_coefficient": 0.012644,
        "formula_age_power_coefficient": -0.00006,
        "formula_age_power_factor": 2.377287,
        "formula_bmi_linear_coefficient": 0.032267,
        "formula_bmi_power_coefficient": -0.00084,
        "formula_bmi_power_factor": 2,
        "formula_tubal_factor_true_value": 0,
        "formula_tubal_factor_false_value": 0,
        "formula_male_factor_infertility_true_value": 0,
        "formula_male_factor_infertility_false_value": 0,
        "formula_endometriosis_true_value": 0,
        "formula_endometriosis_false_value": 0,
        "formula_ovulatory_disorder_true_value": 0,
        "formula_ovulatory_disorder_false_value": 0,
        "formula_diminished_ovarian_reserve_true_value": 0,
        "formula_diminished_ovarian_reserve_false_value": 0,
        "formula_uterine_factor_true_value": 0,
        "formula_uterine_factor_false_value": 0,
        "formula_other_reason_true_value": 0,
        "formula_other_reason_false_value": 0,
        "formula_unexplained_infertility_true_value": 0,
        "formula_unexplained_infertility_false_value": 0,
        "formula_prior_pregnancies_0_value": 0,
        "formula_prior_pregnancies_1_value": -0.11476,
        "formula_prior_pregnancies_2+_value": -0.11943,
        "formula_prior_live_births_0_value": 0,
        "formula_prior_live_births_1_value": 0.074343,
        "formula_prior_live_births_2+_value": 0.039223
    }
]

const hashinputtable = {}
const inputvaluesStep1 = []

/*
Age (20-50)
BMI, calculated from:
Weight (80 - 300 lbs)
Height, in feet and inches. For example, 5'8".

Input is outside of range needed for estimation. Please enter a height between 
4 feet 6 inches and 6 feet.

Tubal Factor (TRUE or FALSE)
Male Factor Infertility (TRUE or FALSE)
Endometriosis (TRUE or FALSE)
Ovulatory Disorder (TRUE or FALSE)
Diminished Ovarian Reserve (TRUE or FALSE)
Uterine Factor (TRUE or FALSE)
Other Reason (TRUE or FALSE)

Or, the reason for infertility is unexplained (TRUE or FALSE) (VIA DOCTOR)

NOTE: This is not the same as "not knowing the reason for their infertility" in 
the previous section. In the above case, the patient has not yet seen a medical 
professional regarding infertility issues. In this case, they have seen a 
medical professional, and the medical professional is unable to explain the 
cause of their infertility.

Note: When testing against the actual CDC IVF Success Calculator: the project 
and the CDC website offer different answers to the question "Have you attempted 
IVF previously?" In the project, the possible answers are either TRUE or FALSE, 
but on the CDC site, you can choose one of 0, 1, 2, or 3+. For testing your 
code against this form, choose "2" on the CDC site.
*/
let arraychoicesbool = []
let arraychoicesnumbers = []

console.log('<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta name="description" content="Find your probability of success for assisted reproduction"><meta name="robots" content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large"></head>')
console.log(`<body><script src="cdc_cleanroom_ivfsuccess.js"></script>`)

console.log(`<form name="ivf">`)
console.log("<br><br><fieldset><legend>Do you plan to use your own eggs or donor eggs? and Have you checked with a doctor? And have you attempted IVF before?</legend>")
console.log(`<select id="formselectcase" name="formselectcase">`)
for (let a of inputtable) {
    const key = (`${a.param_using_own_eggs}|${a.param_attempted_ivf_previously}|${a.param_is_reason_for_infertility_known}`)
    console.log(`<option value="${a.param_using_own_eggs}|${a.param_attempted_ivf_previously}|${a.param_is_reason_for_infertility_known}"> using_own_eggs is ${a.param_using_own_eggs} attempted_ivf_previously is ${a.param_attempted_ivf_previously} is_reason_for_infertility_know ${a.param_is_reason_for_infertility_known}</option>`)
    inputvaluesStep1.push([a.param_using_own_eggs, a.param_attempted_ivf_previously, a.param_is_reason_for_infertility_known])
    hashinputtable[key] = a
    // const choicesbool=(Object.keys(a).filter((word) => (word.indexOf("_true_") != -1) && (word.indexOf("_unexplained_infertility_") == -1)))
    const choicesbool = (Object.keys(a).filter((word) => (word.indexOf("_true_") != -1)))
    arraychoicesbool = arraychoicesbool.concat(choicesbool)

    const choicesnumbers = (Object.keys(a).filter((word) => (word.indexOf("_0_") != -1)))
    arraychoicesnumbers = arraychoicesnumbers.concat(choicesnumbers)

}
console.log(`</select>`)
console.log("</fieldset>")


// age
const formage = []
for (let inputage = 20; inputage <= 50; inputage++) {
    formage.push(inputage)
}

const formweight = []
for (let inputweight = 80; inputweight <= 300; inputweight += 10) {
    formweight.push(inputweight)
}

const formheight_feet = []
for (let inputheight_feet = 4; inputheight_feet <= 6; inputheight_feet++) {
    formheight_feet.push(inputheight_feet)
}

const formheight_inches = []
for (let inputheight_inches = 0; inputheight_inches < 12; inputheight_inches++) {
    formheight_inches.push(inputheight_inches)
}

const form_array = {}
const setchoicesbool = [...new Set(arraychoicesbool)];
// console.log('setchoicesbool', setchoicesbool)

for (let itemchoicesbool of Array.from(setchoicesbool)) {
    form_array[`form_${itemchoicesbool}`] = ["true", "false"]
}

const setchoicesnumbers = [...new Set(arraychoicesnumbers)];
for (let itemchoicesnumbers of Array.from(setchoicesnumbers)) {
    // form_array.push({`form_${itemchoicesnumbers}`: ["0","1","2+"]})
    form_array[`form_${itemchoicesnumbers}`] = ["0", "1", "2+"]

}



console.log(`step1: ${JSON.stringify(inputvaluesStep1)}`);
console.log(`formage: ${JSON.stringify(formage)}`);

console.log(`<br><label>How old are you? (20-50)`)
console.log(`<select id="formage" name="formage">`)
for (let x of formage) {
    console.log(`<option value="${x}">${x}</option>`)
}
console.log(`</select>`)
console.log(`</label>`)

console.log(`formweight: ${JSON.stringify(formweight)}`);

console.log(`<br><label>How much do you weigh? (80-300lbs)`)
console.log(`<select id="formweight" name="formweight">`)
for (let x of formweight) {
    console.log(`<option value="${x}">${x}</option>`)
}
console.log(`</select>`)
console.log(`</label>`)

console.log(`formheight_feet: ${JSON.stringify(formheight_feet)}`);

console.log(`<br><label>How tall are you? (ft)(in)`)
console.log(`<select id="formheight_feet" name="formheight_feet">`)
for (let x of formheight_feet) {
    console.log(`<option value="${x}">${x}</option>`)
}
console.log(`</select>`)

console.log(`formheight_inches: ${JSON.stringify(formheight_inches)}`);
console.log(`<select id="formheight_inches" name="formheight_inches">`)
for (let x of formheight_inches) {
    console.log(`<option value="${x}">${x}</option>`)
}
console.log(`</select>`)
console.log(`</label>`)

console.log("form_array", form_array, typeof(form_array), form_array.length);
console.log("<br><br><fieldset><legend>What is the reason you are using IVF? (select all that apply)</legend>")
for (let x in form_array) {
    console.log(x, form_array[x])
    if (x.indexOf("_true_") != -1) {
        if (x.indexOf("_unexplained_infertility_") != -1) {
            console.log(`<br><br>OR<br><br><input onclick="clearothers()" type="checkbox" id="${x}" name="${x}" value="${x}"><label for="${x}">${x}</label>`)
        } else {
            console.log(`<br><input onclick="clearspecial()" type="checkbox" id="${x}" name="${x}" value="${x}"><label for="${x}">${x}</label>`)
        }
    }
}
console.log("</fieldset>")

for (let x in form_array) {
    console.log(x, form_array[x])
    if (x.indexOf("_0_") != -1) {
        console.log(`<br><label>${x}`)
        console.log(`<select id="${x}" name="${x}">`)
        for (let y in form_array[x]) {
            console.log(x, form_array[x][y])
            console.log(`<option value="${form_array[x][y]}">${form_array[x][y]}</option>`)
        }
        console.log(`</select>`)
        console.log(`</label>`)
    }
}

// Do you plan to use your own eggs or donor eggs?
console.log(`<br><input type="button" onclick="getinput()" value="submit">`)
console.log(`<br><b>CLIENT SIDE:</b><br><textarea id="answer" readonly rows="4" cols="50"></textarea>`)
console.log(`<br><b>SERVER SIDE:</b><br><textarea id="answerserver" readonly rows="4" cols="50"></textarea>`)
console.log(`</form>`)
console.log(`</body></html>`)



function getprobability(
    hash_value,
    //    param_using_own_eggs,
    //    param_attempted_ivf_previously,
    //    param_is_reason_for_infertility_known,
    user_age,
    user_weight_in_lbs,
    user_height_in_feet,
    user_height_in_inches, // only the inches that are between highest integer foot.  For example 5 foot 6 inches would be 5 for feet and 6 for inches
    formula_tubal_factor_value,
    formula_male_factor_infertility_value,
    formula_endometriosis_value,
    formula_ovulatory_disorder_value,
    formula_diminished_ovarian_reserve_value,
    formula_uterine_factor_value,
    formula_other_reason_value,
    formula_unexplained_infertility_value,
    formula_prior_pregnancies_value,
    formula_prior_live_births_value
) {
    const inputobject = {
        hash_value: hash_value,
        user_age: user_age,
        user_weight_in_lbs: user_weight_in_lbs,
        user_height_in_feet: user_height_in_feet,
        user_height_in_inches: user_height_in_inches,
        formula_tubal_factor_value: formula_tubal_factor_value,
        formula_male_factor_infertility_value: formula_male_factor_infertility_value,
        formula_endometriosis_value: formula_endometriosis_value,
        formula_ovulatory_disorder_value: formula_ovulatory_disorder_value,
        formula_diminished_ovarian_reserve_value: formula_diminished_ovarian_reserve_value,
        formula_uterine_factor_value: formula_uterine_factor_value,
        formula_other_reason_value: formula_other_reason_value,
        formula_unexplained_infertility_value: formula_unexplained_infertility_value,
        formula_prior_pregnancies_value: formula_prior_pregnancies_value,
        formula_prior_live_births_value: formula_prior_live_births_value,
    }
    console.log(`>>> input ${JSON.stringify(inputobject)}`)
// curl -L -G --data-urlencode 'inputobject={"hash_value":"true|false|true","user_age":32,"user_weight_in_lbs":150,"user_height_in_feet":5,"user_height_in_inches":8,"formula_tubal_factor_value":false,"formula_male_factor_infertility_value":false,"formula_endometriosis_value":true,"formula_ovulatory_disorder_value":true,"formula_diminished_ovarian_reserve_value":false,"formula_uterine_factor_value":false,"formula_other_reason_value":false,"formula_unexplained_infertility_value":false,"formula_prior_pregnancies_value":1,"formula_prior_live_births_value":1}' 'https://script.google.com/macros/s/AKfycbwjXqeo8NKSUgXA2qY9fscyazex2_MGq-_O1piJhsTauLR_A0gdt--vjMSj3TPpsK0U/exec'

if (typeof fetch !== 'function') {
 fetch = require("node-fetch");
}

const call1 = async () => {
const response = await fetch(`https://script.google.com/macros/s/AKfycbwjXqeo8NKSUgXA2qY9fscyazex2_MGq-_O1piJhsTauLR_A0gdt--vjMSj3TPpsK0U/exec?inputobject=${encodeURIComponent(JSON.stringify(inputobject))}`)
    const answerserver=await response.text()
    console.log(`>>>REQUEST: ${JSON.stringify(inputobject)}`)
    console.log(`>>>RESPONSE: ${answerserver}`)
    console.log("typeof document",typeof document)
    if (typeof document !== "undefined") {
        document.getElementById("answerserver").value = answerserver
    }
};
call1();

    // const valuestouse = hashinputtable[`${param_using_own_eggs}|${param_attempted_ivf_previously}|${param_is_reason_for_infertility_known}`]
    const valuestouse = hashinputtable[hash_value]
    // console.log(`VALUESTOUSE: ${JSON.stringify(valuestouse)}`)
    console.log(`user_weight_in_lbs: ${user_weight_in_lbs}`)
    console.log(`user_height_in_feet: ${user_height_in_feet}`)
    console.log(`user_height_in_inches: ${user_height_in_inches}`)
    const user_bmi = user_weight_in_lbs / ((user_height_in_feet * 12 + user_height_in_inches) ** 2) * 703
    console.log(`user_bmi: ${user_bmi}`)
    /*
        "formula_intercept": -6.8392144,
        "formula_age_linear_coefficient": 0.3347309,
        "formula_age_power_coefficient": -0.0003249,
        "formula_age_power_factor": 2.763313,
        "formula_bmi_linear_coefficient": 0.06997997,
        "formula_bmi_power_coefficient": -0.0015045,
        "formula_bmi_power_factor": 2,
    Tubal Factor: FALSE
    Male Factor Infertility: FALSE
    Endometriosis: TRUE
    Ovulatory Disorder: TRUE
    Diminished Ovarian Reserve: FALSE
    Uterine Factor: FALSE
    Other Infertilty Reason: FALSE
    Unexplained Infertility: FALSE
    Prior Pregnancies: 1
    Prior Live Births: 1
    */
    const score =
        valuestouse.formula_intercept +
        valuestouse.formula_age_linear_coefficient * user_age + valuestouse.formula_age_power_coefficient * (user_age ** valuestouse.formula_age_power_factor) +
        valuestouse.formula_bmi_linear_coefficient * user_bmi + valuestouse.formula_bmi_power_coefficient * (user_bmi ** valuestouse.formula_bmi_power_factor) +
        valuestouse[`formula_tubal_factor_${formula_tubal_factor_value}_value`] +
        valuestouse[`formula_male_factor_infertility_${formula_male_factor_infertility_value}_value`] +
        valuestouse[`formula_endometriosis_${formula_endometriosis_value}_value`] +
        valuestouse[`formula_ovulatory_disorder_${formula_ovulatory_disorder_value}_value`] +
        valuestouse[`formula_diminished_ovarian_reserve_${formula_diminished_ovarian_reserve_value}_value`] +
        valuestouse[`formula_uterine_factor_${formula_uterine_factor_value}_value`] +
        valuestouse[`formula_uterine_factor_${formula_uterine_factor_value}_value`] +
        valuestouse[`formula_other_reason_${formula_other_reason_value}_value`] +
        valuestouse[`formula_unexplained_infertility_${formula_unexplained_infertility_value}_value`] +
        valuestouse[`formula_prior_pregnancies_${formula_prior_pregnancies_value}_value`] +
        valuestouse[`formula_prior_live_births_${formula_prior_live_births_value}_value`]

    /*
    +
    formula_male_factor_infertility_value +
    formula_endometriosis_value +
    formula_ovulatory_disorder_value +
    formula_diminished_ovarian_reserve_value +
    formula_uterine_factor_value +
    formula_other_reason_value +
    formula_unexplained_infertility_value +
    formula_prior_pregnancies_value +
    formula_prior_live_births_value
    */

    console.log(`score: ${score}`)

    console.log(`DEBUG:a formula_bmi_linear_coefficient ${valuestouse.formula_bmi_linear_coefficient}`)
    console.log(`DEBUG:1 ${valuestouse.formula_intercept}`)
    console.log(`DEBUG:2 ${valuestouse.formula_age_linear_coefficient * user_age + valuestouse.formula_age_power_coefficient * (user_age ** valuestouse.formula_age_power_factor)}`)
    console.log(`DEBUG:3 ${valuestouse.formula_bmi_linear_coefficient * user_bmi + valuestouse.formula_bmi_power_coefficient * (user_bmi ** valuestouse.formula_bmi_power_factor)}`)
    console.log(`DEBUG: formula_tubal_factor_${formula_tubal_factor_value}_value ${valuestouse[`formula_tubal_factor_${formula_tubal_factor_value}_value`]}`)
    console.log(`DEBUG: formula_ovulatory_disorder_${formula_ovulatory_disorder_value}_value ${valuestouse[`formula_ovulatory_disorder_${formula_ovulatory_disorder_value}_value`]}`)
    console.log(`DEBUG: formula_prior_pregnancies_${formula_prior_pregnancies_value}_value ${valuestouse[`formula_prior_pregnancies_${formula_prior_pregnancies_value}_value`]}`)
    console.log(`DEBUG: formula_prior_live_births_${formula_prior_live_births_value}_value ${valuestouse[`formula_prior_live_births_${formula_prior_live_births_value}_value`]}`)
    // +
    /*
    const score =
    formula_intercept +
    formula_age_linear_coefficient ✕ user_age + formula_age_power_coefficient ✕ (user_age ^ formula_age_power_factor) +
    formula_bmi_linear_coefficient ✕ user_bmi + formula_bmi_power_coefficient ✕ (user_bmi ^ formula_bmi_power_factor) +
    formula_tubal_factor_value +
    formula_male_factor_infertility_value +
    formula_endometriosis_value +
    formula_ovulatory_disorder_value +
    formula_diminished_ovarian_reserve_value +
    formula_uterine_factor_value +
    formula_other_reason_value +
    formula_unexplained_infertility_value +
    formula_prior_pregnancies_value +
    formula_prior_live_births_value
    */
    // eˢᶜᵒʳᵉ / (1 + eˢᶜᵒʳᵉ)
    const successrate = Math.E ** score / (1 + Math.E ** score)
    return {
        score: score,
        successrate: successrate
    }
}

// const answer = getprobability(true,false,true,
const answer = getprobability('true|false|true',
    32, // user_age,
    150, // user_weight_in_lbs,
    5, // user_height_in_feet,
    8, // user_height_in_inches // only the inches that are between highest integer foot.  For example 5 foot 6 inches would be 5 for feet and 6 for inches
    false,
    false,
    true,
    true,
    false,
    false,
    false,
    false,
    1,
    1,
)
console.log(answer)

/*
    param_using_own_eggs,
    param_attempted_ivf_previously,
    param_is_reason_for_infertility_known,
    user_age,
    user_weight_in_lbs,
    user_height_in_feet,
    user_height_in_inches, // only the inches that are between highest integer foot.  For example 5 foot 6 inches would be 5 for feet and 6 for inches
formula_tubal_factor_value ,
formula_male_factor_infertility_value ,
formula_endometriosis_value ,
formula_ovulatory_disorder_value ,
formula_diminished_ovarian_reserve_value ,
formula_uterine_factor_value ,
formula_other_reason_value ,
formula_unexplained_infertility_value ,
formula_prior_pregnancies_value ,
formula_prior_live_births_value
*/
function getinput() {
    const answer = getprobability(
        document.getElementById("formselectcase").value,
        parseInt(document.getElementById("formage").value),
        parseInt(document.getElementById("formweight").value),
        parseInt(document.getElementById("formheight_feet").value),
        parseInt(document.getElementById("formheight_inches").value),
        document.getElementById("tubal_factor").checked,
        document.getElementById("male_factor_infertility").checked,
        document.getElementById("endometriosis").checked,
        document.getElementById("ovulatory_disorder").checked,
        document.getElementById("diminished_ovarian_reserve").checked,
        document.getElementById("uterine_factor").checked,
        document.getElementById("other_reason").checked,

        document.getElementById("unexplained_infertility").checked,

        document.getElementById("prior_pregnancies").value,
        document.getElementById("prior_live_births").value,
    )
    console.log(
        document.getElementById("formselectcase").value,
        document.getElementById("formage").value,
        document.getElementById("formweight").value,
        document.getElementById("formheight_feet").value,
        document.getElementById("formheight_inches").value,
        document.getElementById("tubal_factor").checked,
        document.getElementById("male_factor_infertility").checked,
        document.getElementById("endometriosis").checked,
        document.getElementById("ovulatory_disorder").checked,
        document.getElementById("diminished_ovarian_reserve").checked,
        document.getElementById("uterine_factor").checked,
        document.getElementById("other_reason").checked,

        document.getElementById("unexplained_infertility").checked,

        document.getElementById("prior_pregnancies").value,
        document.getElementById("prior_live_births").value,
        answer
    )
    document.getElementById("answer").value = JSON.stringify(answer)
}

function clearothers() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]')
    for (let checkbox of checkboxes) {
        console.log(checkbox)
        if (checkbox.id !== "unexplained_infertility") {
            checkbox.checked = false
        }
    }
}

function clearspecial() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]')
    for (let checkbox of checkboxes) {
        console.log(checkbox)
        if (checkbox.id === "unexplained_infertility") {
            checkbox.checked = false
        }
    }
}
